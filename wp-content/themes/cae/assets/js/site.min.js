var CE=CE||{};!function(){CE.collapse=function(){$headerHeight=$(".banner"),$(".panel-body .btn").click(function(){return $("html, body").animate({scrollTop:0},800),!1}),$("#accordion").on("shown.bs.collapse",function(){var e=$(this).find(".in").prevAll(".panel-heading");$("html, body").animate({scrollTop:e.offset().top-100},500)})}}();var CE=CE||{};!function(){CE.facetLoad=function(){function e(){a=!0,n=jQuery(".facetwp-template").html();var e=parseInt(jQuery(".pager").attr("data-page"));jQuery(".pager").attr("data-page",e+1),FWP.paged=e+1,FWP.auto_refresh=!1,FWP.soft_refresh=!0,FWP.refresh()}var t=$(".grid-container");$(document).on("facetwp-loaded",function(){if(t.hasClass("isotope"),alert("facet-loaded"),t.isotope({itemSelector:".grid-item",sortAscending:!1,layoutMode:"masonry",resizable:!1,resizesContainer:!1,masonry:{columnWidth:".grid-item",gutter:5}}),a){var e=$(".facetwp-template").html();$(".facetwp-template").html(n+e),a=!1}else $(".pager").attr("data-page",1)}),$(document).on("facetwp-refresh",function(){$(".facetwp-template").html('<div class="loading_data animated">LOADING</div>'),alert("facetwp-refresh")});var n,a=!1;$(".pager").click(function(){e()})}}();var CE=CE||{};!function(){CE.headerParallax=function(){$.stellar({horizontalScrolling:!1})}}();var CE=CE||{};!function(){CE.legacy=function(){Modernizr.csscalc||$(".hero-nav .hero-nav-color-block").css("color","white")}}();var CE=CE||{};!function(){CE.navTrigger=function(){{var e=$(".js-nav-open-trigger"),t=$(".js-nav-close-trigger, .main, .footer"),n=$(".nav-full-screen");n.height()}$page=$("html"),$intViewportHeight=window.innerHeight,$body=$("body"),e.click(function(){n.addClass("opened"),$(".banner").css("display","none"),$(".main, .footer").css("z-index","2").transit({opacity:.2}),t.addClass("active"),$("html, body").animate({scrollTop:0},200),$(".main a,.footer a").click(function(){})}),t.click(function(){$(this).removeClass("active"),n.removeClass("opened"),$(".banner").css("display",""),$(".main, .footer").css("z-index","").transit({opacity:1}),$page.css("min-height","")})}}();var CE=CE||{};!function(){CE.searchExpand=function(){$(".js-expand-on-click").click(function(){$(this).toggleClass("expanded")})}}();var CE=CE||{};!function(){CE.sidebarNav=function(){function e(){var e=$(".side-nav-container"),t=$(".container").width(),n=$(window).width(),a=(n-t)/2,i=$(".side-nav li:not(.share)");i.length&&n>992?(e.css("left",a).transit({opacity:1}),e.stickyNavbar({animateCSS:!1})):e.transit({opacity:0})}e(),window.onresize=e}}();var CE=CE||{};!function(){CE.socialPopup=function(){function e(e){e=e?e:window.event;var n=e.target?e.target:e.srcElement,a=Math.floor(((screen.availWidth||1024)-t.Width)/2),i=Math.floor(((screen.availHeight||700)-t.Height)/2),o=window.open(n.href,"social","width="+t.Width+",height="+t.Height+",left="+a+",top="+i+",location=0,menubar=0,toolbar=0,status=0,scrollbars=1,resizable=1");return o&&(o.focus(),e.preventDefault&&e.preventDefault(),e.returnValue=!1),!!o}for(var t={Link:".popup",Width:500,Height:500},n=document.querySelectorAll(t.Link),a=0;a<n.length;a++)n[a].onclick=e}}();var CE=CE||{};!function(){CE.splashMessage=function(){var e=$(".splash-message"),t=$(".splash-message .close"),n=$(".close-cookie"),a=$("body");$.cookie("cae_splash_v3")?(e.remove(),a.removeClass("dimmed")):a.addClass("dimmed"),t.click(function(){e.remove(),a.removeClass("dimmed")}),n.click(function(){e.remove(),a.removeClass("dimmed"),$.cookie("cae_splash_v3","true",{expires:30})})}}();var CE=CE||{};!function(){CE.stripeParallax=function(){$.stellar()}}();var CE=CE||{};!function(){CE.temperature=function(){$.simpleWeather({location:"Boyle Heights, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#bh").html(html)},error:function(){$("#bh").html("78&deg;")}}),$.simpleWeather({location:"City Heights, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#ch").html(html)},error:function(){$("#ch").html("78&deg;")}}),$.simpleWeather({location:"Coachella Valley, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#cv").html(html)},error:function(){$("#cv").html("78&deg;")}}),$.simpleWeather({location:"Del Norte, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#dnatl").html(html)},error:function(){$("#dnatl").html("78&deg;")}}),$.simpleWeather({location:"Oakland, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#oak").html(html)},error:function(){$("#oak").html("78&deg;")}}),$.simpleWeather({location:"East Salinas, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#sns").html(html)},error:function(){$("#sns").html("78&deg;")}}),$.simpleWeather({location:"Fresno, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#fno").html(html)},error:function(){$("#fno").html("78&deg;")}}),$.simpleWeather({location:"Long Beach, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#lb").html(html)},error:function(){$("#lb").html("78&deg;")}}),$.simpleWeather({location:"Merced, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#mcd").html(html)},error:function(){$("#mcd").html("78&deg;")}}),$.simpleWeather({location:"Richmond, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#rmd").html(html)},error:function(){$("#rmd").html("78&deg;")}}),$.simpleWeather({location:"Sacramento, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#sac").html(html)},error:function(){$("#sac").html("78&deg;")}}),$.simpleWeather({location:"Santa Ana, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#sna").html(html)},error:function(){$("#sna").html("78&deg;")}}),$.simpleWeather({location:"South Kern, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#krn").html(html)},error:function(){$("#krn").html("78&deg;")}}),$.simpleWeather({location:"South Los Angeles, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#la").html(html)},error:function(){$("#la").html("78&deg;")}}),$.simpleWeather({location:"Tribal Lands, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#tbl").html(html)},error:function(){$("#tbl").html("78&deg;")}})}}();var CE=CE||{};!function(){CE.desktopFilter=function(){var e=$(".filters > li > a"),t=($(".sub-filter li a"),$("#ajax-load-more .alm-btn-wrap .more")),n=$(".grid-container"),a=($(".grid-item"),{itemSelector:".grid-item",gutter:5});t.trigger("click"),e.click(function(t){t.preventDefault(),e.not(this).parent("li").removeClass("open"),$(this).parent(".filter-main").toggleClass("open").removeClass("selected")}),$(".filters > li").hover(function(){$(".filters > li").not(this).children(".filter-key").css("background-image","none")},function(){$(".filter-key").css("background-image","")}),$(document).mouseup(function(e){var t=$(".main");!t.is(e.target)&&0===t.has(e.target).length,$(".filters li").removeClass("open")});var i=n.imagesLoaded(function(){i.masonry(a),$(".grid-item").addClass("loaded")});$filter_ya_container=$("ul.filters"),$filter_ya_container.on("click",".sub-filter li a",function(e){i.fadeOut(),$(".filter-key.reset").hide(),$(".filter-key:last-of-type").show(),e.preventDefault(),$tax=[],$(this).parents("li").hasClass("selected")?($(".filter-key").css("background-image",""),$(this).parents("li").removeClass("selected")):$(this).parents("li").removeClass("open").addClass("selected"),$current=$filter_ya_container.find(".sub-filter li.selected"),$current.each(function(){$curr={term:$(this).find("a").attr("title"),taxonomy:$(this).closest("ul.sub-filter").data("tax"),name:$(this).find("a span").html()},$tax.push($curr)}),data={action:"filter_posts",afp_nonce:afp_vars.afp_nonce,tax_details:$tax},$.ajax({type:"post",dataType:"html",url:afp_vars.afp_ajax_url,data:data,timeout:5e3,success:function(e){i.html(e),i.fadeIn(),$("#ajax-load-more .alm-btn-wrap .more").hide()},error:function(e,t,n){console.log(e),console.log(t),console.log(n),console.log("error"),i.html(data)}}),$(document).ajaxComplete(function(){i.masonry("destroy"),i.masonry(a),$(".grid-item").addClass("loaded")})});$.fn.almComplete=function(e){i.append(e.el).masonry("appended",e.el).masonry("layout",a),$(".grid-item").addClass("loaded")}}}();var CE=CE||{};!function(){CE.reportPageHeight=function(){var e=$(".single-report .main"),t=$(".report-single"),n=t.map(function(){return $(this).height()}).get(),a=Math.max.apply(null,n);e.height(a)}}();var CE=CE||{};!function(){CE.reportSectionSwitcher=function(){var e=$(".report-prev > a"),t=$(".report-next > a"),n=$(".report-nav li:first-child"),a=($("#report-panel-1"),$(".report-nav > li")),i=window.location.hash,o=$(".report-container"),r=$(".report-single");o.height(r).css("overflow","hidden"),i.length?($id=i.substr(1),$(".report-nav li:not(.report)").each(function(){$(this).data("id")==$id&&$(this).addClass("active")}),$(".report-single").each(function(){if($(this).data("id")==$id){$(this).addClass("current").transit({x:0,opacity:1},800,"ease"),$(".report-single").not($(this)).transit({x:"100%",opacity:0},800,"ease").removeClass("current");var e=$(this).height();o.height(e)+210}})):n.addClass("active"),$(".report-single:nth-of-type(1) .report-prev a").remove(),$(".report-single:last-of-type .report-next a").remove(),t.click(function(e){var t=$(this).attr("href"),n=$(this).parents(".report-single"),i=$(this).parents(".report-single").data("id"),r=$(t).height();n.transit({x:"-100%",opacity:0},800,"ease").removeClass("current"),$(t).transit({x:0,opacity:1},800,"ease").addClass("current"),a.removeClass("active"),a.filter(function(){return $(this).data("id")===i+1}).addClass("active"),window.location.hash=i+1,e.preventDefault(),o.height(r)+210}),e.click(function(e){var t=$(this).attr("href"),n=$(this).parents(".report-single"),i=$(this).parents(".report-single").data("id"),r=$(t).height();n.transit({x:"100%",opacity:0},800,"ease").removeClass("current"),$(t).transit({x:0,opacity:1},800,"ease").addClass("current"),a.removeClass("active"),a.filter(function(){return $(this).data("id")===i-1}).addClass("active"),window.location.hash=i-1,e.preventDefault(),o.height(r)+210}),$(".report-nav li:not(.full-report) a").click(function(e){{var t=$(this).attr("href"),n=$(t).data("id"),i=$(this).parent("li"),r=$(t).height();window.location.hash}window.location.hash=n,a.removeClass("active"),i.addClass("active"),$(t).nextUntil("span").transit({x:"100%",opacity:0},800,"ease").removeClass("current"),$(t).prevUntil("span").transit({x:"-100%",opacity:0},800,"ease").removeClass("current"),$(t).transit({x:0,opacity:1},800,"ease").addClass("current"),o.height(r)+210,e.preventDefault()}),$("body").on("keydown",function(e){37==e.which?(e.preventDefault(),$(".report-single.current .report-nav-top .report-prev a").trigger("click")):39==e.which&&(e.preventDefault(),$(".report-single.current .report-nav-top .report-next a").trigger("click"))})}}();var CE=window.CE||{};CE.Site={common:{init:function(){CE.searchExpand(),CE.navTrigger(),CE.collapse(),CE.temperature(),$(".js-popover").popover({html:!0,content:function(){return $(this).children("span").html()}}),$(".js-popover").click(function(){$(".js-popover").not(this).popover("hide")}),$("html.touch").length||CE.headerParallax();var e=window.location.hash,t=$(".panel-group");t.length&&e.length&&$(e).find(".collapsed").trigger("click"),CE.legacy(),CE.splashMessage(),$("body").tweetHighlighted({via:"calendow"})}},page_template_page_campaign_overview_php:{init:function(){$(".bx-slider").bxSlider({maxSlides:3,auto:!1,pager:!1,slideWidth:265,slideMargin:9,infiniteLoop:!1,hideControlOnEnd:!0})}},page_template_page_campaign_detail_php:{init:function(){$(".footer-post-nav li").length<4&&$(".footer-post-nav,.footer-add-padding").addClass("short")}},page:{init:function(){CE.sidebarNav(),CE.socialPopup(),$("html.touch").length||CE.stripeParallax(),$(".newsletter-wrapper").length&&($("#ajax-load-more .alm-btn-wrap .more").trigger("click"),CE.desktopFilter())}},single:{init:function(){CE.sidebarNav(),$(".hentry").fitVids(),CE.socialPopup()}},home:{init:function(){CE.desktopFilter()}},single_report:{init:function(){CE.reportPageHeight(),CE.reportSectionSwitcher()}}};var UTIL={fire:function(e,t,n){var a=CE.Site;t=void 0===t?"init":t,""!==e&&a[e]&&"function"==typeof a[e][t]&&a[e][t](n)},loadEvents:function(){UTIL.fire("common"),$.each(document.body.className.replace(/-/g,"_").split(/\s+/),function(e,t){UTIL.fire(t)})}};$(document).ready(UTIL.loadEvents);