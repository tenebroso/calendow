var CE=CE||{};!function(){CE.collapse=function(){$headerHeight=$(".banner"),$('.panel-body .btn[href="#top"]').click(function(){return $("html, body").animate({scrollTop:0},800),!1}),$("#accordion").on("shown.bs.collapse",function(){var e=$(this).find(".in").prevAll(".panel-heading");$("html, body").animate({scrollTop:e.offset().top-100},500)})}}();var CE=CE||{};!function(){CE.headerParallax=function(){$.stellar({horizontalScrolling:!1})}}();var CE=CE||{};!function(){CE.legacy=function(){Modernizr.csscalc||$(".hero-nav .hero-nav-color-block").css("color","white")}}();var CE=CE||{};!function(){CE.navTrigger=function(){{var e=$(".js-nav-open-trigger"),t=$(".js-nav-close-trigger, .main, .footer"),i=$(".nav-full-screen"),n=(i.height(),$("html"));window.innerHeight,$("body")}e.click(function(){i.addClass("opened"),$(".banner").css("display","none"),$(".main, .footer").css("z-index","2").transit({opacity:.2}),t.addClass("active"),$("html, body").animate({scrollTop:0},200),$(".main a,.footer a").click(function(e){})}),t.click(function(){$(this).removeClass("active"),i.removeClass("opened"),$(".banner").css("display",""),$(".main, .footer").css("z-index","").transit({opacity:1}),n.css("min-height","")})}}();var CE=CE||{};!function(){CE.readThisSlider=function(){$(".bx-slider").bxSlider({maxSlides:3,auto:!1,pager:!1,slideWidth:265,slideMargin:9,infiniteLoop:!1,hideControlOnEnd:!0})}}();var CE=CE||{};!function(){CE.searchExpand=function(){function e(){$(this).val().length>15&&$(this).css("min-width",5*$(this).val().length+207)}var t=$(".js-expand-on-click");t.keyup(e).each(e)}}();var CE=CE||{};!function(){CE.sidebarNav=function(){function e(){var e=$(".side-nav-container"),t=$(".container").width(),i=$(window).width(),n=(i-t)/2,a=$(".side-nav li:not(.share)");a.length&&i>992?(e.css("left",n).transit({opacity:1}),e.stickyNavbar({animateCSS:!1})):e.transit({opacity:0})}e(),window.onresize=e}}();var CE=CE||{};!function(){CE.socialPopup=function(){function e(e){e=e?e:window.event;var i=e.target?e.target:e.srcElement,n=Math.floor(((screen.availWidth||1024)-t.Width)/2),a=Math.floor(((screen.availHeight||700)-t.Height)/2),o=window.open(i.href,"social","width="+t.Width+",height="+t.Height+",left="+n+",top="+a+",location=0,menubar=0,toolbar=0,status=0,scrollbars=1,resizable=1");return o&&(o.focus(),e.preventDefault&&e.preventDefault(),e.returnValue=!1),!!o}for(var t={Link:".popup",Width:500,Height:500},i=document.querySelectorAll(t.Link),n=0;n<i.length;n++)i[n].onclick=e}}();var CE=CE||{};!function(){CE.splashMessage=function(){var e=$(".splash-message"),t=$(".splash-message .close, body"),i=$(".close-cookie"),n=$("body");$.cookie("cae_splash_mod")?(e.removeClass("active"),n.removeClass("dimmed")):(e.addClass("active"),n.addClass("dimmed"),$.cookie("cae_splash_mod","true",{expires:30})),t.click(function(){e.removeClass("active"),n.removeClass("dimmed")}),i.click(function(){e.removeClass("active"),n.removeClass("dimmed"),$.cookie("cae_splash_mod","true",{expires:30})})}}();var CE=CE||{};!function(){CE.stripeParallax=function(){$.stellar()}}();var CE=CE||{};!function(){CE.temperature=function(){$.simpleWeather({location:"Boyle Heights, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#bh").html(html)},error:function(e){$("#bh").html("78&deg;")}}),$.simpleWeather({location:"City Heights, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#ch").html(html)},error:function(e){$("#ch").html("78&deg;")}}),$.simpleWeather({location:"Coachella Valley, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#cv").html(html)},error:function(e){$("#cv").html("78&deg;")}}),$.simpleWeather({location:"Del Norte, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#dnatl").html(html)},error:function(e){$("#dnatl").html("78&deg;")}}),$.simpleWeather({location:"Oakland, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#oak").html(html)},error:function(e){$("#oak").html("78&deg;")}}),$.simpleWeather({location:"East Salinas, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#sns").html(html)},error:function(e){$("#sns").html("78&deg;")}}),$.simpleWeather({location:"Fresno, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#fno").html(html)},error:function(e){$("#fno").html("78&deg;")}}),$.simpleWeather({location:"Long Beach, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#lb").html(html)},error:function(e){$("#lb").html("78&deg;")}}),$.simpleWeather({location:"Merced, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#mcd").html(html)},error:function(e){$("#mcd").html("78&deg;")}}),$.simpleWeather({location:"Richmond, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#rmd").html(html)},error:function(e){$("#rmd").html("78&deg;")}}),$.simpleWeather({location:"Sacramento, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#sac").html(html)},error:function(e){$("#sac").html("78&deg;")}}),$.simpleWeather({location:"Santa Ana, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#sna").html(html)},error:function(e){$("#sna").html("78&deg;")}}),$.simpleWeather({location:"South Kern, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#krn").html(html)},error:function(e){$("#krn").html("78&deg;")}}),$.simpleWeather({location:"South Los Angeles, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#la").html(html)},error:function(e){$("#la").html("78&deg;")}}),$.simpleWeather({location:"Tribal Lands, CA",woeid:"",unit:"f",success:function(e){html=e.temp+"&deg;",$("#tbl").html(html)},error:function(e){$("#tbl").html("78&deg;")}})}}();var CE=CE||{};!function(){CE.thumbnailNav=function(){var e=window.location.href,t=$('.sub-nav-thumbnail a[href="'+e+'"]'),i=t.parent("li"),n=i.prevAll("li").children("a").attr("href"),a=i.nextAll("li").children("a").attr("href"),o=$(".nav.newsletters li.sub-nav-thumbnail a").attr("href"),r=$(".nav.newsletters li:nth-of-type(5) a").attr("href");i.addClass("active"),"#"!==a?$(".nav.newsletters li.pull-right a").attr("href",a):$(".nav.newsletters li.pull-right a").attr("href",o),"#"!==n?$(".nav.newsletters li.pull-left a").attr("href",n):$(".nav.newsletters li.pull-left a").attr("href",r)}}();var CE=CE||{};!function(){CE.reportPageHeight=function(){var e=$(".single-report .main"),t=$(".report-single"),i=t.map(function(){return $(this).height()}).get(),n=Math.max.apply(null,i);e.height(n)}}();var CE=CE||{};!function(){CE.reportSectionSwitcher=function(){var e=$(".report-prev > a"),t=$(".report-next > a"),i=$(".report-nav li:first-child"),n=($("#report-panel-1"),$(".report-nav > li")),a=window.location.hash,o=$(".report-container"),r=$(".report-single");o.height(r).css("overflow","hidden"),a.length?($id=a.substr(1),$(".report-nav li:not(.report)").each(function(){$(this).data("id")==$id&&$(this).addClass("active")}),$(".report-single").each(function(){if($(this).data("id")==$id){$(this).addClass("current").transit({x:0,opacity:1},800,"ease"),$(".report-single").not($(this)).transit({x:"100%",opacity:0},800,"ease").removeClass("current");var e=$(this).height();o.height(e+210)}})):i.addClass("active"),$(".report-single:nth-of-type(1) .report-prev a").remove(),$(".report-single:last-of-type .report-next a").remove(),t.click(function(e){var t=$(this).attr("href"),i=$(this).parents(".report-single"),a=$(this).parents(".report-single").data("id"),r=$(t).height();i.transit({x:"-100%",opacity:0},800,"ease").removeClass("current"),$(t).transit({x:0,opacity:1},800,"ease").addClass("current"),n.removeClass("active"),n.filter(function(){return $(this).data("id")===a+1}).addClass("active"),window.location.hash=a+1,e.preventDefault(),o.height(r+210)}),e.click(function(e){var t=$(this).attr("href"),i=$(this).parents(".report-single"),a=$(this).parents(".report-single").data("id"),r=$(t).height();i.transit({x:"100%",opacity:0},800,"ease").removeClass("current"),$(t).transit({x:0,opacity:1},800,"ease").addClass("current"),n.removeClass("active"),n.filter(function(){return $(this).data("id")===a-1}).addClass("active"),window.location.hash=a-1,e.preventDefault(),o.height(r+210)}),$(".report-nav li:not(.full-report) a").click(function(e){{var t=$(this).attr("href"),i=$(t).data("id"),a=$(this).parent("li"),r=$(t).height();window.location.hash}window.location.hash=i,n.removeClass("active"),a.addClass("active"),$(t).nextUntil("span").transit({x:"100%",opacity:0},800,"ease").removeClass("current"),$(t).prevUntil("span").transit({x:"-100%",opacity:0},800,"ease").removeClass("current"),$(t).transit({x:0,opacity:1},800,"ease").addClass("current"),o.height(r+210),e.preventDefault()}),$(".doc__module--item-link").click(function(e){var t=$(this).attr("href");$(t).nextUntil("span").transit({x:"100%",opacity:0},800,"ease").removeClass("current"),$(t).prevUntil("span").transit({x:"-100%",opacity:0},800,"ease").removeClass("current"),$(t).transit({x:0,opacity:1},800,"ease").addClass("current"),o.height($height+210),e.preventDefault()}),$("body").on("keydown",function(e){37==e.which?(e.preventDefault(),$(".report-single.current .report-nav-top .report-prev a").trigger("click")):39==e.which&&(e.preventDefault(),$(".report-single.current .report-nav-top .report-next a").trigger("click"))})}}();var CE=CE||{};!function(){CE.desktopFilter=function(){var e=$(".filters > li > a"),t=($(".sub-filter li a"),$("#ajax-load-more .alm-btn-wrap .more"),$("#ajax-load-more")),i=($(".grid-item"),{itemSelector:".grid-item",gutter:5});e.click(function(t){t.preventDefault(),e.not(this).parent("li").removeClass("open"),$(this).parent(".filter-main").toggleClass("open").removeClass("selected")}),$(".filters > li").hover(function(){$(".filters > li").not(this).children(".filter-key").css("background-image","none")},function(){$(".filter-key").css("background-image","")}),$(document).mouseup(function(e){var t=$(".main");!t.is(e.target)&&0===t.has(e.target).length,$(".filters li").removeClass("open")});var n=t.imagesLoaded(function(){n.masonry(i),$(".grid-item").addClass("loaded")});$filter_ya_container=$("ul.filters"),$filter_ya_container.on("click",".sub-filter li a",function(e){n.fadeOut(),$(".filter-key.reset").hide(),$(".filter-key:last-of-type").show(),e.preventDefault(),$tax=[],$(this).parents("li").hasClass("selected")?($(".filter-key").css("background-image",""),$(this).parents("li").removeClass("selected")):$(this).parents("li").removeClass("open").addClass("selected"),$current=$filter_ya_container.find(".sub-filter li.selected"),console.log($current),$current.each(function(){$curr={term:$(this).find("a").attr("title"),taxonomy:$(this).closest("ul.sub-filter").data("tax"),name:$(this).find("a span").html(),custom:$(this).find("a").data("url"),title:$(".page-title").find("strong").html()},$tax.push($curr)}),$title=$(".page-title").find("strong").html(),void 0==$title&&($title="Home"),data={action:"filter_posts",afp_nonce:afp_vars.afp_nonce,tax_details:$tax,page_title:$title},$.ajax({type:"post",dataType:"html",url:afp_vars.afp_ajax_url,data:data,timeout:15e3,success:function(e,t,i){n.html(e),n.fadeIn(),$("#ajax-load-more .alm-btn-wrap .more").hide()},error:function(e,t,i){console.log(e),console.log(t),console.log(i),console.log("error"),n.html(data)}}),$(document).ajaxComplete(function(){n.masonry("destroy"),n.masonry(i),$(".grid-item").addClass("loaded")})});$.fn.almComplete=function(e){n.append(e.el).masonry("appended",e.el).masonry("layout",i),$(".grid-item").addClass("loaded")}}}();var CE=window.CE||{};CE.Site={common:{init:function(){CE.searchExpand(),CE.navTrigger(),CE.collapse(),CE.temperature(),$(".js-popover").popover({html:!0,content:function(){return $(this).children("span").html()}}),$(".js-popover").click(function(){$(".js-popover").not(this).popover("hide")}),$("html.touch").length||CE.headerParallax();var e=window.location.hash,t=$(".panel-group");t.length&&e.length&&$(e).find(".collapsed").trigger("click"),CE.legacy(),CE.splashMessage(),$("body").tweetHighlighted({via:"calendow"}),$(".content-map--container-column-cell").click(function(){var e=Number($(this).attr("data-id")),t=[];$($(this).attr("href")).find(".content-map--modal").each(function(){t.push({src:$(this)})}),$.magnificPopup.open({items:t,gallery:{enabled:!0}},e)})}},page_template_page_campaign_overview_php:{init:function(){CE.readThisSlider()}},page_template_page_campaign_detail_php:{init:function(){$(".animsition").animsition({inClass:"fade-in",outClass:"fade-out",inDuration:1500,outDuration:400,linkElement:".animsition-link",loading:!0,loadingParentElement:"body",loadingClass:"animsition-loading",unSupportCss:["animation-duration","-webkit-animation-duration","-o-animation-duration"],overlay:!1,overlayClass:"animsition-overlay-slide",overlayParentElement:"body"}),$(".footer-post-nav li").length<4&&$(".footer-post-nav,.footer-add-padding").addClass("short"),CE.thumbnailNav()}},page_template_template_places_php:{init:function(){CE.thumbnailNav(),CE.readThisSlider();var e=$(window).width();if(e>992){var t=$(".side-nav-container .sidenav-title");t.addClass("white-text"),$(window).on("scroll",function(){$("body").scrollTop()>500?t.removeClass("white-text"):t.addClass("white-text")})}}},page:{init:function(){CE.sidebarNav(),CE.socialPopup(),$("html.touch").length||CE.stripeParallax(),$(".newsletter-wrapper").length&&($("#ajax-load-more .alm-btn-wrap .more").trigger("click"),CE.desktopFilter()),($(".page-id-124").length||$(".page-id-578").length)&&$(".js-popup").magnificPopup({type:"inline"})}},single:{init:function(){CE.sidebarNav(),$(".hentry").fitVids(),CE.socialPopup()}},home:{init:function(){CE.desktopFilter(),$(".js-popup").magnificPopup({type:"inline"}),$(".wp-polls-ans ul li.poll--answer").click(function(){$(".wp-polls-ans ul li.poll--answer").removeClass("active"),$(".wp-polls-ans ul li.poll--answer").children("input").attr("checked",!1),$(this).children("input").attr("checked",!0),$(this).addClass("active")})}},single_report:{init:function(){CE.reportPageHeight(),CE.reportSectionSwitcher()}},search:{init:function(){var e=window.screen.height,t=$(".main"),i=$(".footer");t.css("min-height",e-308),i.css("opacity","1")}}};var UTIL={fire:function(e,t,i){var n=CE.Site;t=void 0===t?"init":t,""!==e&&n[e]&&"function"==typeof n[e][t]&&n[e][t](i)},loadEvents:function(){UTIL.fire("common"),$.each(document.body.className.replace(/-/g,"_").split(/\s+/),function(e,t){UTIL.fire(t)})}};$(document).ready(UTIL.loadEvents);